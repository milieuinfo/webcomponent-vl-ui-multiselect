<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <script src="../../@webcomponents/webcomponentsjs/webcomponents-lite.js"></script>
  <script src="../../web-component-tester/browser.js"></script>
  <script src="../node_modules/sinon/pkg/sinon.js"></script>
  <script type="module" src="../vl-multiselect.src.js"></script>
</head>

<body>
  <test-fixture id="vl-multiselect-fixture">
    <template>
      <select multiple is="vl-multiselect"></select>
    </template>
  </test-fixture>

  <script>
    suite('vl-multiselect', () => {
      let field, choices;

      setup((done) => {
        field = fixture('vl-multiselect-fixture');

        choices = {
          element: field,
          setChoices: sinon.spy(),
          config: {}
        };
        window.vl = {
          select: {
            dress: sinon.fake(),
            undress: sinon.fake(),
            enable: sinon.fake(),
            disable: sinon.fake(),
            removeActive: sinon.fake(),
            setValueByChoice: sinon.fake(),
            showDropdown: sinon.fake(),
            hideDropdown: sinon.fake()
          },
          util: {
            each: (instances, callback) => {
              callback(choices);
            }
          }
        };

        customElements.whenDefined('vl-multiselect').then(done);
      });

      test('heeft de vl-multiselect class en attributen', () => {
        assert.isTrue(field.classList.contains('vl-multiselect'));
        assert.equal(field.getAttribute('name'), 'multiselect');
        assert.isTrue(field.hasAttribute('data-vl-multiselect'));
      });
    });
  </script>
</body>

</html>
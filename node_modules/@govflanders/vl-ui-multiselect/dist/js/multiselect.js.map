{"version":3,"file":"multiselect.js","sources":["../../src/js/multiselect.js"],"sourcesContent":["/**\n * Progressively enhance a multiselect field\n */\nconst nameSpace = vl.ns,\n  msClass = `js-${nameSpace}select`,\n  msInputClass = `${msClass}__input`,\n  msInputClassMulti = `${msInputClass}--multi`,\n  msInputClassButton = `${msInputClass}__button`,\n  msCtaClass = `${nameSpace}select__cta`,\n  msCtaTitleClass = `${nameSpace}select__cta__title`,\n  msGroupClass = `${nameSpace}select__group`,\n  msListClass = `${nameSpace}select__list`,\n  msListWrapperClass = `${nameSpace}select__list-wrapper`,\n  msWrapperClass = `${nameSpace}select__wrapper`,\n  msFormClass = `${nameSpace}select__form`,\n  msCtaActiveClass = `${msCtaClass}--active`,\n  dataPrefix = `data-${nameSpace}`,\n  msDressedAtt = `${dataPrefix}multiselect-dressed`,\n  msContentAtt = `${dataPrefix}content`,\n  msInputAtt = `${dataPrefix}input`,\n  msRecordsAtt = `${dataPrefix}records`,\n  msRecordAtt = `${dataPrefix}record`,\n  msFocusAtt = `${dataPrefix}focus`,\n  msShowAtt = `${dataPrefix}show`,\n  msSelectedAtt = `${dataPrefix}selected`,\n  msIndexAtt = `${dataPrefix}index`,\n  msLabelAtt = `${dataPrefix}label`,\n  msAtt = `${dataPrefix}multiselect`,\n  msIDAtt = `${dataPrefix}id`,\n  msPlaceholderAtt = `${dataPrefix}placeholder`,\n  msValueAtt = `${dataPrefix}value`,\n  msEmptyAtt = `${dataPrefix}empty`,\n  msSearchEmptyAtt = `${dataPrefix}search-empty`;\n\nlet selectedArrOptions = null;\n\n/**\n * Eventhandler | selectContainer keyDown\n * @method _selectContentInputKeyDownHandler\n * @param  {event}\n */\nconst _selectContentInputKeyDownHandler = event => {\n  if (event.shiftKey && event.keyCode === 9) {\n    event.preventDefault();\n    return false;\n  }\n\n  switch (event.keyCode) {\n    case 27:\n    case 9:\n      event.preventDefault();\n      return false;\n  }\n};\n\n/**\n * Setting the general data attributes & aria tags\n * @method _setVisibilityAttributes\n * @param  {element} field\n * @param  {boolean} dataShow\n */\nconst _setVisibilityAttributes = (field, dataShow) => {\n  field.setAttribute(msShowAtt, dataShow);\n  field.setAttribute('aria-hidden', !dataShow);\n};\n\n/**\n * Generate the enhanced select\n * @method _generateSelect\n * @param  {element} select\n * @return {[arr, uniqId, selectContainer]}\n */\nconst _generateSelect = select => {\n  let arr = [],\n    uniqId = vl.util.uniqueId(),\n    selectContainer = select.closest(`.${msClass}`),\n    selectWrapper,\n    selectForm,\n    selectDummyButton,\n    selectDummyInput,\n    placeholder,\n    selectFormInput,\n    selectFormInputDescription,\n    selectListWrapper,\n    selectList,\n    optgroups,\n    i = 0;\n\n  // Creating empty elements\n  selectWrapper = document.createElement('div');\n  selectForm = document.createElement('div');\n  selectListWrapper = document.createElement('div');\n  selectList = document.createElement('section');\n  selectFormInput = document.createElement('input');\n  selectFormInputDescription = document.createElement('span');\n\n  // Hide normal select field\n  vl.util.addClass(select, `${nameSpace}u-visually-hidden`);\n  select.setAttribute('aria-hidden', 'true');\n  select.setAttribute('tabindex', '-1');\n\n  // Get data-id or generate one\n  if (select.hasAttribute(msIDAtt)) {\n    uniqId = select.getAttribute(msIDAtt);\n  }\n\n  selectContainer.setAttribute(msIDAtt, uniqId);\n\n  // Fake select field\n  selectDummyButton = document.createElement('button');\n  selectDummyInput = document.createElement('div');\n\n  selectDummyInput.setAttribute(msFocusAtt, '');\n  selectDummyInput.setAttribute('id', uniqId);\n  vl.util.addClass(selectDummyInput, msInputClass);\n  vl.util.addClass(selectDummyInput, msInputClassMulti);\n\n  selectDummyButton.setAttribute('aria-haspopup', 'true');\n  selectDummyButton.setAttribute('aria-expanded', 'false');\n  vl.util.addClass(selectDummyButton, msInputClassButton);\n\n  if (\n    select.hasAttribute('disabled') &&\n    select.getAttribute('disabled') !== 'false'\n  ) {\n    selectDummyInput.setAttribute('disabled', 'true');\n  }\n\n  placeholder = select.querySelector(`[${msPlaceholderAtt}]`);\n  selectDummyButton.innerHTML = placeholder.label;\n\n  selectContainer.appendChild(selectDummyInput);\n  selectContainer.appendChild(selectDummyButton);\n\n  vl.util.addClass(selectWrapper, msWrapperClass);\n  selectWrapper.setAttribute(msContentAtt, '');\n  selectWrapper.setAttribute('aria-labelledby', uniqId);\n  _setVisibilityAttributes(selectWrapper, false);\n\n  selectContainer.appendChild(selectWrapper);\n\n  vl.util.addClass(selectForm, msFormClass);\n\n  selectWrapper.appendChild(selectForm);\n\n  selectFormInput.setAttribute('type', 'text');\n  selectFormInput.setAttribute('autocomplete', 'off');\n  vl.util.addClass(selectFormInput, `${nameSpace}input-field`);\n  vl.util.addClass(selectFormInput, `${nameSpace}input-field--block`);\n  selectFormInput.setAttribute(msInputAtt, '');\n  selectFormInput.setAttribute(msFocusAtt, '');\n  selectFormInput.setAttribute('value', '');\n  selectFormInput.setAttribute('tabindex', '-1');\n  selectFormInput.setAttribute(\n    'aria-describedby',\n    `${nameSpace}selectFormInputDescription${uniqId}`\n  );\n  selectFormInput.setAttribute('aria-haspopup', 'listbox\"');\n\n  selectForm.appendChild(selectFormInput);\n\n  selectFormInputDescription.setAttribute(\n    'id',\n    `${nameSpace}selectFormInputDescription${uniqId}`\n  );\n  selectFormInputDescription.innerHTML =\n    'U bevindt zich in de zoekfunctie van een dropdown menu met multiselect in een formulier. Navigeer door de opties met de pijltjes en selecteer met enter. Gebruik escape om de dropdown te sluiten.';\n  vl.util.addClass(selectFormInputDescription, `${nameSpace}u-visually-hidden`);\n\n  selectForm.appendChild(selectFormInputDescription);\n\n  // Select List Wrapper\n  vl.util.addClass(selectListWrapper, msListWrapperClass);\n  selectListWrapper.setAttribute('role', 'listbox');\n\n  selectWrapper.appendChild(selectListWrapper);\n\n  // Select list\n  vl.util.addClass(selectList, msListClass);\n  selectList.setAttribute(msRecordsAtt, '');\n\n  selectListWrapper.appendChild(selectList);\n\n  // Generate option groups based on optgroups in real select\n  optgroups = select.querySelectorAll('optgroup');\n\n  if (optgroups.length) {\n    vl.util.each(optgroups, optgroup => {\n      let label = optgroup.getAttribute('label'),\n        selectOptionGroupWrapper = document.createElement('section');\n\n      vl.util.addClass(selectOptionGroupWrapper, msGroupClass);\n      selectOptionGroupWrapper.setAttribute(msLabelAtt, label);\n      selectOptionGroupWrapper.setAttribute('role', 'group');\n      selectList.appendChild(selectOptionGroupWrapper);\n    });\n  }\n\n  /**\n   * Generate list items based on options in real select\n   * @method vl.util.each\n   * @param  {object} selectOption\n   * @param  {object} opt\n   *\n   */\n  vl.util.each(select.options, opt => {\n    let value = opt.value,\n      label = opt.innerHTML,\n      selectOption = document.createElement('div'),\n      selectOptionButton = document.createElement('button'),\n      selectOptionTitleSpan = document.createElement('span'),\n      closestOptGroup,\n      closestGeneratedOptGroup;\n\n    if (!opt.hasAttribute(msPlaceholderAtt)) {\n      vl.util.addClass(selectOption, `${nameSpace}select__item`);\n    }\n\n    vl.util.addClass(selectOptionButton, msCtaClass);\n\n    // If option is selected set the element active and change the label in the DummyInput\n    if (opt.selected) {\n      vl.util.addClass(selectOptionButton, msCtaActiveClass);\n      selectOptionButton.setAttribute('aria-selected', 'true');\n    } else {\n      selectOptionButton.setAttribute('aria-selected', 'false');\n    }\n\n    selectOptionButton.setAttribute('type', 'button');\n    selectOptionButton.setAttribute(msIndexAtt, i);\n    selectOptionButton.setAttribute(msValueAtt, value);\n    selectOptionButton.setAttribute(msLabelAtt, label);\n    selectOptionButton.setAttribute(msRecordAtt, '');\n    selectOptionButton.setAttribute(msFocusAtt, '');\n    selectOptionButton.setAttribute('role', 'option');\n    selectOptionButton.setAttribute('tabindex', '-1');\n\n    // Title (span wrapper)\n    vl.util.addClass(selectOptionTitleSpan, msCtaTitleClass);\n    selectOptionTitleSpan.innerHTML = label;\n\n    // Appends\n    selectOptionButton.appendChild(selectOptionTitleSpan);\n    selectOption.appendChild(selectOptionButton);\n\n    // Assign to option group if available\n    closestOptGroup = opt.closest('optgroup');\n\n    if (closestOptGroup === null) {\n      selectList.appendChild(selectOption);\n    } else {\n      closestGeneratedOptGroup = selectList.querySelector(\n        `[${msLabelAtt}=\"${closestOptGroup.getAttribute('label')}\"]`\n      );\n\n      closestGeneratedOptGroup.appendChild(selectOption);\n    }\n\n    // Add to arrOptions array\n    arr.push(label);\n    i++;\n  });\n\n  return [arr, uniqId, selectContainer];\n};\n\n/**\n * Generating pills used in the multiselect input field\n * @method _generatePills\n * @param  {select}  select\n * @param  {element} selectContainer\n * @param  {input}   selectDummyInput\n * @param  {element} selectContentListItems\n * @param  {id}      selectId\n * @return {activeOpts}\n */\nconst _generatePills = (\n  select,\n  selectContainer,\n  selectDummyInput,\n  selectContentListItems,\n  selectId\n) => {\n  const activeOpts = selectContainer.getElementsByClassName(msCtaActiveClass);\n\n  // Clear all elements\n  selectDummyInput.innerHTML = '';\n\n  // If present: generate pills based on active options\n  if (activeOpts.length > 0) {\n    vl.util.each(activeOpts, item => {\n      let pillWrapper = document.createElement('div'),\n        pillSpan = document.createElement('span'),\n        pillCta = document.createElement('a');\n\n      const _ctaEvent = event => {\n        let correspondingItem;\n\n        event.preventDefault();\n\n        correspondingItem = selectContainer.querySelector(\n          `[${msRecordAtt}][${msValueAtt}=\"${item.getAttribute(msValueAtt)}\"]`\n        );\n\n        vl.util.removeClass(correspondingItem, msCtaActiveClass);\n\n        // Generate Pills\n        _generatePills(\n          select,\n          selectContainer,\n          selectDummyInput,\n          selectContentListItems,\n          selectId\n        );\n\n        // Set selectfield options\n        selectedArrOptions = _setOriginalSelectFieldOptions(\n          selectId,\n          selectContentListItems\n        );\n\n        event.stopPropagation\n          ? event.stopPropagation()\n          : event.cancelBubble = true;\n      };\n\n      const _ctaKeydownEvent = event => {\n        if (event.keyCode === 13) {\n          _ctaEvent(event);\n        }\n      };\n\n      vl.util.addClass(pillWrapper, `${nameSpace}pill`);\n      vl.util.addClass(pillWrapper, `${nameSpace}pill--closable`);\n      selectDummyInput.appendChild(pillWrapper);\n\n      pillSpan.innerHTML = item.getAttribute(msLabelAtt);\n      pillWrapper.appendChild(pillSpan);\n\n      vl.util.addClass(pillCta, `${nameSpace}pill__close`);\n      pillCta.setAttribute('href', '#');\n      pillCta.setAttribute(msValueAtt, item.getAttribute(msValueAtt));\n      pillCta.innerHTML = 'verwijder optie';\n\n      // Remove pill on click/keyup(enter)\n      pillCta.addEventListener('click', _ctaEvent);\n      pillCta.addEventListener('keyup', _ctaKeydownEvent);\n\n      pillWrapper.appendChild(pillCta);\n    });\n  } else {\n    // Set placeholder or empty field\n    let placeholder = select.querySelector(`[${msPlaceholderAtt}]`);\n\n    if (placeholder === null) {\n      selectDummyInput.innerHTML = '';\n    } else {\n      selectDummyInput.innerHTML = placeholder.label;\n    }\n  }\n\n  return activeOpts;\n};\n\n/**\n * Generate the \"no results found\" option\n * @method _setNoResultsFoundElement\n * @param  {string} state\n * @param  {element} selectContainer\n * @param  {element} selectContentList\n */\nconst _setNoResultsFoundElement = (\n  state,\n  selectContainer,\n  selectContentList\n) => {\n  let prevEl, noResultsFoundElement, noResultsFoundElementContent;\n\n  switch (state) {\n    case 'show':\n      prevEl = selectContentList.querySelector(`[${msEmptyAtt}]`);\n\n      if (prevEl === null) {\n        noResultsFoundElement = document.createElement('div');\n        noResultsFoundElementContent = document.createElement('div');\n\n        vl.util.addClass(noResultsFoundElement, `${nameSpace}select__item`);\n        selectContentList.appendChild(noResultsFoundElement);\n\n        vl.util.addClass(noResultsFoundElementContent, `${nameSpace}select__empty`);\n        noResultsFoundElementContent.setAttribute(msEmptyAtt, '');\n\n        if (selectContainer.hasAttribute(msSearchEmptyAtt)) {\n          noResultsFoundElementContent.innerHTML = selectContainer.getAttribute(\n            msSearchEmptyAtt\n          );\n        } else {\n          noResultsFoundElementContent.innerHTML = 'No results found';\n        }\n\n        noResultsFoundElement.appendChild(noResultsFoundElementContent);\n      }\n      break;\n    case 'hide':\n      prevEl = selectContentList.querySelector(`[${msEmptyAtt}]`);\n\n      if (prevEl !== null) {\n        vl.util.removeElement(prevEl);\n      }\n      break;\n  }\n};\n\n/**\n * Setting the options in the hidden select field equal to the element selected in the generated select\n * @method _setOriginalSelectFieldOptions\n * @param  {id} selectId\n * @param  {element} selectContentListItems\n * @return {arrOptions}\n */\nconst _setOriginalSelectFieldOptions = (selectId, selectContentListItems) => {\n  let event = new Event('change'),\n    sel = document.querySelector(\n      `.${msClass}[${msIDAtt}=\"${selectId}\"] select`\n    ),\n    arrOptions = [],\n    values = [],\n    opts = sel.options;\n\n  vl.util.each(selectContentListItems, item => {\n    if (vl.util.hasClass(item, msCtaActiveClass)) {\n      arrOptions.push(item);\n      values.push(item.getAttribute(msValueAtt));\n    }\n  });\n\n  vl.util.each(opts, opt => {\n    opt.selected = false;\n\n    vl.util.each(values, value => {\n      if (opt.value === value) {\n        opt.selected = true;\n      }\n    });\n  });\n\n  sel.dispatchEvent(event);\n\n  // Return selected all options\n  return arrOptions;\n};\n\n/**\n * Multiselect\n *\n * Public Methods\n * --------------\n * @method dress(element)\n * @method dressAll\n * @method setDisabledState(select, state)\n */\nclass Multiselect {\n  contructor() {\n    this.lastSelectId = null;\n    this.lastContainer = null;\n  }\n\n  /**\n   * Dresses vl.util.each instance of multiselect\n   * @method dress\n   * @param  {select} selectField\n   */\n  dress(selectField) {\n    // Variables needed in Generate selects based on original <select> element\n    let arr = _generateSelect(selectField),\n      arrOptions = arr[0],\n      selectId = arr[1],\n      selectContainer = arr[2],\n      activeArrOptions = arrOptions, // = options that are shown\n      selectDummyInput = selectContainer.querySelector(`.${msInputClass}`),\n      selectContent = selectContainer.querySelector(`[${msContentAtt}]`),\n      selectContentInput = selectContent.querySelector(`[${msInputAtt}]`),\n      selectContentList = selectContent.querySelector(`[${msRecordsAtt}]`),\n      selectContentListItems = selectContent.querySelectorAll(\n        `[${msRecordAtt}]`\n      ),\n      curOption,\n      curOptionIndex = 0;\n\n    selectedArrOptions = _generatePills(\n      selectField,\n      selectContainer,\n      selectDummyInput,\n      selectContentListItems,\n      selectId,\n      selectedArrOptions\n    );\n    // = options that are selected\n\n    selectField.setAttribute(msDressedAtt, true);\n\n    /**\n     * Set state of vl.util.each selectContent\n     * @method _setSelectState\n     * @param  {Boolean} isShown\n     */\n    const _setSelectState = isShown => {\n      let dataShow = false,\n        ariaHidden = true,\n        ariaExpanded = false;\n\n      if (isShown) {\n        dataShow = true;\n        ariaHidden = false;\n        ariaExpanded = true;\n      }\n\n      selectContent.setAttribute(msShowAtt, dataShow);\n      selectContent.setAttribute('aria-hidden', ariaHidden);\n      selectContent.setAttribute('aria-expanded', ariaExpanded);\n    };\n\n    /**\n     * Handles keyDown and keyUp keyboard event\n     * @method _keyHandler\n     * @param  {event} event\n     * @param  {string} direction ['up', 'down']\n     */\n    const _keyHandler = (event, direction) => {\n      let directionIsUp =\n          direction === 'up' ? true : direction === 'down' ? false : null,\n        changeParameter = directionIsUp\n          ? curOptionIndex > 0\n          : curOptionIndex < activeArrOptions - 1;\n\n      event.preventDefault();\n\n      if (selectContent.getAttribute(msShowAtt) !== 'true') {\n        // Tonen bij arrow down en index 1 verhogen wodat je op dezelfde positie zit bij het openen\n        _setSelectState(true);\n\n        directionIsUp ? curOptionIndex++ : curOptionIndex--;\n      }\n\n      if (changeParameter) {\n        const el = selectContentList.querySelector(\n          `[${msRecordAtt}][${msIndexAtt}=\"${curOptionIndex}\"]`\n        );\n\n        directionIsUp ? curOptionIndex-- : curOptionIndex++;\n        curOption.removeAttribute(msSelectedAtt);\n\n        el.setAttribute(msSelectedAtt, 'true');\n        el.focus();\n\n        if (selectContentInput === null) {\n          selectDummyInput.focus();\n        } else {\n          selectContentInput.focus();\n        }\n      }\n    };\n\n    /**\n     * Set current option\n     * @method _setCurrentOption\n     */\n    const _setCurrentOption = () => {\n      curOption = selectContentList.querySelector(\n        `[${msRecordAtt}][${msSelectedAtt}=\"true\"]`\n      );\n      curOption === null\n        ? curOption = selectContentList.querySelector(\n          `[${msRecordAtt}][${msIndexAtt}=\"0\"]`\n        )\n        : null;\n      curOptionIndex = curOption.getAttribute(msIndexAtt);\n    };\n\n    /**\n     * Reset options\n     * @method _resetOptions\n     */\n    const _resetOptions = () => {\n      vl.util.each(arrOptions, item => {\n        let el = selectContentList.querySelector(\n          `[${msRecordAtt}][${msLabelAtt}=\"${item}\"]`\n        );\n\n        el.removeAttribute(msSelectedAtt);\n        el.setAttribute(msShowAtt, 'true');\n        el.setAttribute(msIndexAtt, arrOptions.findIndex(item));\n\n        if (\n          selectContentList.querySelector(\n            `[${msRecordAtt}][${msIndexAtt}=\"0\"]`\n          ) !== null\n        ) {\n          selectContentList\n            .querySelector(`[${msRecordAtt}][${msIndexAtt}=\"0\"]`)\n            .setAttribute(msSelectedAtt, 'true');\n        }\n      });\n    };\n\n    /**\n     * Handles default keypress\n     * @method _keyDefaultHandler\n     * @param  {element} selectedEl\n     */\n    const _keyDefaultHandler = selectedEl => {\n      selectedEl = selectedEl || null;\n\n      if (selectContentInput !== null) {\n        let val = selectContentInput.value,\n          el;\n\n        activeArrOptions = [];\n\n        vl.util.each(arrOptions, item => {\n          el = selectContentList.querySelector(\n            `[${msRecordAtt}][${msLabelAtt}=\"${item}\"]`\n          );\n\n          // Set visibility hidden of all items & remove index of all items & remove old focus\n          el.setAttribute(msShowAtt, 'false');\n          el.removeAttribute(msIndexAtt);\n          el.removeAttribute(msSelectedAtt);\n\n          // If substring is present in string show item and push to array\n          if (item.toLowerCase().indexOf(val.toLowerCase()) > -1) {\n            el.setAttribute(msShowAtt, 'true');\n            activeArrOptions.push(item);\n          }\n\n          if (activeArrOptions.length) {\n            _setNoResultsFoundElement(\n              'hide',\n              selectContainer,\n              selectContentList\n            );\n\n            vl.util.each(activeArrOptions, (opt, i) => {\n              selectContentList\n                .querySelector(`[${msRecordAtt}][${msLabelAtt}=\"${opt}\"]`)\n                .setAttribute(msIndexAtt, i);\n            });\n\n            // Set focus on first element\n            if (selectedEl === null) {\n              let el = selectContentList.querySelector(\n                `[${msRecordAtt}][${msIndexAtt}=\"0\"]`\n              );\n\n              el === null ? null : el.setAttribute(msSelectedAtt, 'true');\n            } else {\n              selectedEl.setAttribute(msSelectedAtt, 'true');\n              window.setTimeout(() => {\n                selectedEl.focus();\n                selectContentInput.focus();\n              }, 1);\n            }\n          } else {\n            _setNoResultsFoundElement(\n              'show',\n              selectContainer,\n              selectContentList\n            );\n          }\n\n          let optgroups = selectContentList.querySelectorAll(\n            `.${msGroupClass}`\n          );\n\n          vl.util.each(optgroups, optgroup => {\n            let items = optgroup.querySelectorAll(\n              `.${msCtaClass}[${msShowAtt}=\"true\"]`\n            );\n\n            items.length\n              ? optgroup.style.display = 'block'\n              : optgroup.style.display = 'none';\n          });\n        });\n      }\n    };\n\n    /**\n     *\n     * @method _selectContentInputKeyUpHandler\n     * @param  {event} event\n     */\n    const _selectContentInputKeyUpHandler = event => {\n      event.preventDefault();\n\n      /**\n       * If Tab + Shift key are pressed\n       * @method if\n       * @param  {tabKey && shiftKey} event\n       */\n      if (event.shiftKey && event.keyCode === 9) {\n        _setSelectState(false);\n        selectDummyInput.focus();\n      }\n\n      activeArrOptions.length <= 0 ? _resetOptions() : _setCurrentOption();\n\n      /**\n       * Handles keypresses\n       * @method switch\n       * @param  {keypress} event\n       */\n      switch (event.keyCode) {\n        case 9: // Tab Key\n        case 27: // Esc key\n          vl.util.triggerEvent(document, 'click');\n          selectDummyInput.focus();\n          break;\n        case 8: // Backspace key\n          _resetOptions();\n          _keyDefaultHandler();\n          break;\n        case 32: // Space key\n          selectField.getAttribute(msShowAtt) === 'true'\n            ? null\n            : selectDummyInput.click();\n          break;\n        case 13: // Enter key\n          if (selectField.getAttribute(msShowAtt) === true) {\n            curOption.click();\n          } else {\n            _setSelectState(true);\n            selectContentInput === null\n              ? selectDummyInput.focus()\n              : selectContentInput.focus();\n          }\n          break;\n        case 38: // Arrow up key\n          activeArrOptions.length > 0 ? _keyHandler(event, 'up') : null;\n          break;\n        case 40: // Arrow down key\n          activeArrOptions.length > 0 ? _keyHandler(event, 'down') : null;\n          break;\n        default:\n          _keyDefaultHandler();\n          break;\n      }\n    };\n\n    /**\n     * Handles events on keydown on the selectContainer\n     * @method _selectContainerKeyDownEventHandler\n     * @param  {event}\n     */\n    const _selectContainerKeyDownEventHandler = event => {\n      if (event.shiftKey && event.keyCode === 9) {\n        event.preventDefault();\n        return false;\n      }\n\n      switch (event.keyCode) {\n        case 27:\n        case 9:\n          event.preventDefault();\n          return false;\n      }\n    };\n\n    /**\n     * Eventhandles | selectDummyInput Click\n     * @method _selectDummyInputClickEventHandler\n     */\n    const _selectDummyInputClickEventHandler = () => {\n      if (selectContent.getAttribute(msShowAtt) === 'false') {\n        // Show select\n        _setSelectState(true);\n\n        // Set focus on search if present\n        if (selectContentInput !== null) {\n          selectContentInput.focus();\n        }\n\n        // Select first element in generated records\n        if (\n          selectContentList.querySelector(\n            `[${msRecordAtt}][${msIndexAtt}=\"0\"]`\n          ) !== null\n        ) {\n          selectContentList\n            .querySelector(`[${msRecordAtt}][${msIndexAtt}=\"0\"]`)\n            .setAttribute(msSelectedAtt, 'true');\n        }\n      } else {\n        _setSelectState(false);\n      }\n    };\n\n    /**\n     * Loop through dynamically generated records\n     * @type {selectListItems}\n     */\n    vl.util.each(selectContentListItems, item => {\n      item.addEventListener('click', () => {\n        // Toggle active class to selected element\n        vl.util.toggleClass(item, msCtaActiveClass);\n\n        // Set selected state to original select\n        selectedArrOptions = _setOriginalSelectFieldOptions(\n          selectId,\n          selectContentListItems\n        );\n\n        // Generate pills\n        _generatePills(\n          selectField,\n          selectContainer,\n          selectDummyInput,\n          selectContentListItems,\n          selectId\n        );\n\n        // Set focus\n        selectContentInput === null\n          ? selectDummyInput.focus()\n          : selectContentInput.focus();\n\n        // Remove query in select input\n        if (selectContentInput !== null) {\n          selectContentInput.value = '';\n          _keyDefaultHandler(\n            selectContentList.querySelector(`[${msSelectedAtt}=\"true\"]`)\n          );\n        }\n      });\n    });\n\n    // Eventhandlers\n    selectContentInput\n      ? selectContentInput.addEventListener(\n        'keyup',\n        _selectContentInputKeyUpHandler\n      )\n      : null;\n\n    selectContentInput\n      ? selectContentInput.addEventListener(\n        'keydown',\n        _selectContentInputKeyDownHandler\n      )\n      : null;\n    selectContainer\n      ? selectContainer.addEventListener(\n        'keydown',\n        _selectContainerKeyDownEventHandler\n      )\n      : null;\n\n    selectDummyInput\n      ? selectDummyInput.addEventListener(\n        'click',\n        _selectDummyInputClickEventHandler\n      )\n      : null;\n\n    /**\n     * Set state of select on click outside of select\n     * @event\n     */\n    document.addEventListener('click', () => {\n      _setSelectState(false);\n    });\n\n    selectContainer.addEventListener('click', event => {\n      event.stopPropagation();\n      event.preventDefault();\n    });\n  }\n\n  /**\n   * Select all instances and dress them\n   * @method dressAll\n   */\n  dressAll() {\n    const elements = document.querySelectorAll(\n      `[${msAtt}]:not([${msDressedAtt}])`\n    );\n\n    vl.util.each(elements, element => {\n      this.dress(element);\n    });\n  }\n\n  /**\n   * Set/remove disabled state of a select\n   * @method setDisabledState\n   * @param  {select}        select\n   * @param  {disabledState} state\n   */\n  setDisabledState(select, state) {\n    const selectContainer = select.closest(`.${msClass}`),\n      selectDummyInput = selectContainer.querySelector(`.${msInputClass}`);\n\n    if (state) {\n      select.setAttribute('disabled', state);\n      selectDummyInput.setAttribute('disabled', state);\n    } else {\n      select.removeAttribute('disabled');\n      selectDummyInput.removeAttribute('disabled');\n    }\n  }\n}\n\n/**\n * Exporting class\n */\nexport default Multiselect;\n"],"names":["nameSpace","vl","ns","msClass","msInputClass","msInputClassMulti","msInputClassButton","msCtaClass","msCtaTitleClass","msGroupClass","msListClass","msListWrapperClass","msWrapperClass","msFormClass","msCtaActiveClass","dataPrefix","msDressedAtt","msContentAtt","msInputAtt","msRecordsAtt","msRecordAtt","msFocusAtt","msShowAtt","msSelectedAtt","msIndexAtt","msLabelAtt","msAtt","msIDAtt","msPlaceholderAtt","msValueAtt","msEmptyAtt","msSearchEmptyAtt","selectedArrOptions","_selectContentInputKeyDownHandler","event","shiftKey","keyCode","preventDefault","_setVisibilityAttributes","field","dataShow","setAttribute","_generateSelect","select","arr","uniqId","util","uniqueId","selectContainer","closest","selectWrapper","selectForm","selectDummyButton","selectDummyInput","placeholder","selectFormInput","selectFormInputDescription","selectListWrapper","selectList","optgroups","i","document","createElement","addClass","hasAttribute","getAttribute","querySelector","innerHTML","label","appendChild","querySelectorAll","length","each","optgroup","selectOptionGroupWrapper","options","opt","value","selectOption","selectOptionButton","selectOptionTitleSpan","closestOptGroup","closestGeneratedOptGroup","selected","push","_generatePills","selectContentListItems","selectId","activeOpts","getElementsByClassName","item","pillWrapper","pillSpan","pillCta","_ctaEvent","correspondingItem","removeClass","_setOriginalSelectFieldOptions","stopPropagation","cancelBubble","_ctaKeydownEvent","addEventListener","_setNoResultsFoundElement","state","selectContentList","prevEl","noResultsFoundElement","noResultsFoundElementContent","removeElement","Event","sel","arrOptions","values","opts","hasClass","dispatchEvent","Multiselect","lastSelectId","lastContainer","selectField","activeArrOptions","selectContent","selectContentInput","curOption","curOptionIndex","_setSelectState","isShown","ariaHidden","ariaExpanded","_keyHandler","direction","directionIsUp","changeParameter","el","removeAttribute","focus","_setCurrentOption","_resetOptions","findIndex","_keyDefaultHandler","selectedEl","val","toLowerCase","indexOf","window","setTimeout","items","style","display","_selectContentInputKeyUpHandler","triggerEvent","click","_selectContainerKeyDownEventHandler","_selectDummyInputClickEventHandler","toggleClass","elements","element","dress"],"mappings":"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"}
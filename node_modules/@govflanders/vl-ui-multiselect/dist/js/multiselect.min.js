!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.multiselect=e()}("undefined"!=typeof self?self:this,function(){"use strict";function n(t,e){for(var c=0;c<e.length;c++){var n=e[c];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var f=vl.ns,A="js-".concat(f,"select"),h="".concat(A,"__input"),m="".concat(h,"--multi"),y="".concat(h,"__button"),C="".concat(f,"select__cta"),g="".concat(f,"select__cta__title"),k="".concat(f,"select__group"),E="".concat(f,"select__list"),S="".concat(f,"select__list-wrapper"),q="".concat(f,"select__wrapper"),_="".concat(f,"select__form"),w="".concat(C,"--active"),t="data-".concat(f),L="".concat(t,"multiselect-dressed"),x="".concat(t,"content"),T="".concat(t,"input"),D="".concat(t,"records"),H="".concat(t,"record"),M="".concat(t,"focus"),j="".concat(t,"show"),I="".concat(t,"selected"),P="".concat(t,"index"),K="".concat(t,"label"),c="".concat(t,"multiselect"),N="".concat(t,"id"),z="".concat(t,"placeholder"),B="".concat(t,"value"),u="".concat(t,"empty"),i="".concat(t,"search-empty"),F=function(t){if(t.shiftKey&&9===t.keyCode)return t.preventDefault(),!1;switch(t.keyCode){case 27:case 9:return t.preventDefault(),!1}},O=function(t){var e,c,n,l,a,u,i,r,o,s,d=[],b=vl.util.uniqueId(),p=t.closest(".".concat(A)),v=0;return e=document.createElement("div"),c=document.createElement("div"),r=document.createElement("div"),o=document.createElement("section"),u=document.createElement("input"),i=document.createElement("span"),vl.util.addClass(t,"".concat(f,"u-visually-hidden")),t.setAttribute("aria-hidden","true"),t.setAttribute("tabindex","-1"),t.hasAttribute(N)&&(b=t.getAttribute(N)),p.setAttribute(N,b),n=document.createElement("button"),(l=document.createElement("div")).setAttribute(M,""),l.setAttribute("id",b),vl.util.addClass(l,h),vl.util.addClass(l,m),n.setAttribute("aria-haspopup","true"),n.setAttribute("aria-expanded","false"),vl.util.addClass(n,y),t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")&&l.setAttribute("disabled","true"),a=t.querySelector("[".concat(z,"]")),n.innerHTML=a.label,p.appendChild(l),p.appendChild(n),vl.util.addClass(e,q),e.setAttribute(x,""),e.setAttribute("aria-labelledby",b),function(t,e){t.setAttribute(j,e),t.setAttribute("aria-hidden",!e)}(e,!1),p.appendChild(e),vl.util.addClass(c,_),e.appendChild(c),u.setAttribute("type","text"),u.setAttribute("autocomplete","off"),vl.util.addClass(u,"".concat(f,"input-field")),vl.util.addClass(u,"".concat(f,"input-field--block")),u.setAttribute(T,""),u.setAttribute(M,""),u.setAttribute("value",""),u.setAttribute("tabindex","-1"),u.setAttribute("aria-describedby","".concat(f,"selectFormInputDescription").concat(b)),u.setAttribute("aria-haspopup",'listbox"'),c.appendChild(u),i.setAttribute("id","".concat(f,"selectFormInputDescription").concat(b)),i.innerHTML="U bevindt zich in de zoekfunctie van een dropdown menu met multiselect in een formulier. Navigeer door de opties met de pijltjes en selecteer met enter. Gebruik escape om de dropdown te sluiten.",vl.util.addClass(i,"".concat(f,"u-visually-hidden")),c.appendChild(i),vl.util.addClass(r,S),r.setAttribute("role","listbox"),e.appendChild(r),vl.util.addClass(o,E),o.setAttribute(D,""),r.appendChild(o),(s=t.querySelectorAll("optgroup")).length&&vl.util.each(s,function(t){var e=t.getAttribute("label"),c=document.createElement("section");vl.util.addClass(c,k),c.setAttribute(K,e),c.setAttribute("role","group"),o.appendChild(c)}),vl.util.each(t.options,function(t){var e,c=t.value,n=t.innerHTML,l=document.createElement("div"),a=document.createElement("button"),u=document.createElement("span");t.hasAttribute(z)||vl.util.addClass(l,"".concat(f,"select__item")),vl.util.addClass(a,C),t.selected?(vl.util.addClass(a,w),a.setAttribute("aria-selected","true")):a.setAttribute("aria-selected","false"),a.setAttribute("type","button"),a.setAttribute(P,v),a.setAttribute(B,c),a.setAttribute(K,n),a.setAttribute(H,""),a.setAttribute(M,""),a.setAttribute("role","option"),a.setAttribute("tabindex","-1"),vl.util.addClass(u,g),u.innerHTML=n,a.appendChild(u),l.appendChild(a),null===(e=t.closest("optgroup"))?o.appendChild(l):o.querySelector("[".concat(K,'="').concat(e.getAttribute("label"),'"]')).appendChild(l),d.push(n),v++}),[d,b,p]},G=function a(u,i,r,o,s){var t=i.getElementsByClassName(w);if(r.innerHTML="",0<t.length)vl.util.each(t,function(c){var t=document.createElement("div"),e=document.createElement("span"),n=document.createElement("a"),l=function(t){var e;t.preventDefault(),e=i.querySelector("[".concat(H,"][").concat(B,'="').concat(c.getAttribute(B),'"]')),vl.util.removeClass(e,w),a(u,i,r,o,s),J(s,o),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0};vl.util.addClass(t,"".concat(f,"pill")),vl.util.addClass(t,"".concat(f,"pill--closable")),r.appendChild(t),e.innerHTML=c.getAttribute(K),t.appendChild(e),vl.util.addClass(n,"".concat(f,"pill__close")),n.setAttribute("href","#"),n.setAttribute(B,c.getAttribute(B)),n.innerHTML="verwijder optie",n.addEventListener("click",l),n.addEventListener("keyup",function(t){13===t.keyCode&&l(t)}),t.appendChild(n)});else{var e=u.querySelector("[".concat(z,"]"));r.innerHTML=null===e?"":e.label}return t},U=function(t,e,c){var n,l,a;switch(t){case"show":null===(n=c.querySelector("[".concat(u,"]")))&&(l=document.createElement("div"),a=document.createElement("div"),vl.util.addClass(l,"".concat(f,"select__item")),c.appendChild(l),vl.util.addClass(a,"".concat(f,"select__empty")),a.setAttribute(u,""),e.hasAttribute(i)?a.innerHTML=e.getAttribute(i):a.innerHTML="No results found",l.appendChild(a));break;case"hide":null!==(n=c.querySelector("[".concat(u,"]")))&&vl.util.removeElement(n)}},J=function(t,e){var c=new Event("change"),n=document.querySelector(".".concat(A,"[").concat(N,'="').concat(t,'"] select')),l=[],a=[],u=n.options;return vl.util.each(e,function(t){vl.util.hasClass(t,w)&&(l.push(t),a.push(t.getAttribute(B)))}),vl.util.each(u,function(e){e.selected=!1,vl.util.each(a,function(t){e.value===t&&(e.selected=!0)})}),n.dispatchEvent(c),l};return function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t)}return function(t,e,c){e&&n(t.prototype,e),c&&n(t,c)}(t,[{key:"contructor",value:function(){this.lastSelectId=null,this.lastContainer=null}},{key:"dress",value:function(e){var a,t=O(e),c=t[0],n=t[1],u=t[2],i=c,r=u.querySelector(".".concat(h)),o=u.querySelector("[".concat(x,"]")),s=o.querySelector("[".concat(T,"]")),d=o.querySelector("[".concat(D,"]")),l=o.querySelectorAll("[".concat(H,"]")),b=0;G(e,u,r,l,n),e.setAttribute(L,!0);var p=function(t){var e=!1,c=!0,n=!1;t&&(n=!(c=!(e=!0))),o.setAttribute(j,e),o.setAttribute("aria-hidden",c),o.setAttribute("aria-expanded",n)},v=function(t,e){var c="up"===e||"down"!==e&&null,n=c?0<b:b<i-1;if(t.preventDefault(),"true"!==o.getAttribute(j)&&(p(!0),c?b++:b--),n){var l=d.querySelector("[".concat(H,"][").concat(P,'="').concat(b,'"]'));c?b--:b++,a.removeAttribute(I),l.setAttribute(I,"true"),l.focus(),null===s?r.focus():s.focus()}},f=function(){vl.util.each(c,function(t){var e=d.querySelector("[".concat(H,"][").concat(K,'="').concat(t,'"]'));e.removeAttribute(I),e.setAttribute(j,"true"),e.setAttribute(P,c.findIndex(t)),null!==d.querySelector("[".concat(H,"][").concat(P,'="0"]'))&&d.querySelector("[".concat(H,"][").concat(P,'="0"]')).setAttribute(I,"true")})},A=function(n){if(n=n||null,null!==s){var l,a=s.value;i=[],vl.util.each(c,function(t){if((l=d.querySelector("[".concat(H,"][").concat(K,'="').concat(t,'"]'))).setAttribute(j,"false"),l.removeAttribute(P),l.removeAttribute(I),-1<t.toLowerCase().indexOf(a.toLowerCase())&&(l.setAttribute(j,"true"),i.push(t)),i.length)if(U("hide",u,d),vl.util.each(i,function(t,e){d.querySelector("[".concat(H,"][").concat(K,'="').concat(t,'"]')).setAttribute(P,e)}),null===n){var e=d.querySelector("[".concat(H,"][").concat(P,'="0"]'));null!==e&&e.setAttribute(I,"true")}else n.setAttribute(I,"true"),window.setTimeout(function(){n.focus(),s.focus()},1);else U("show",u,d);var c=d.querySelectorAll(".".concat(k));vl.util.each(c,function(t){t.querySelectorAll(".".concat(C,"[").concat(j,'="true"]')).length?t.style.display="block":t.style.display="none"})})}};vl.util.each(l,function(t){t.addEventListener("click",function(){vl.util.toggleClass(t,w),J(n,l),G(e,u,r,l,n),null===s?r.focus():s.focus(),null!==s&&(s.value="",A(d.querySelector("[".concat(I,'="true"]'))))})}),s&&s.addEventListener("keyup",function(t){switch(t.preventDefault(),t.shiftKey&&9===t.keyCode&&(p(!1),r.focus()),i.length<=0?f():(null===(a=d.querySelector("[".concat(H,"][").concat(I,'="true"]')))&&(a=d.querySelector("[".concat(H,"][").concat(P,'="0"]'))),b=a.getAttribute(P)),t.keyCode){case 9:case 27:vl.util.triggerEvent(document,"click"),r.focus();break;case 8:f(),A();break;case 32:"true"!==e.getAttribute(j)&&r.click();break;case 13:!0===e.getAttribute(j)?a.click():(p(!0),null===s?r.focus():s.focus());break;case 38:0<i.length&&v(t,"up");break;case 40:0<i.length&&v(t,"down");break;default:A()}}),s&&s.addEventListener("keydown",F),u&&u.addEventListener("keydown",function(t){if(t.shiftKey&&9===t.keyCode)return t.preventDefault(),!1;switch(t.keyCode){case 27:case 9:return t.preventDefault(),!1}}),r&&r.addEventListener("click",function(){"false"===o.getAttribute(j)?(p(!0),null!==s&&s.focus(),null!==d.querySelector("[".concat(H,"][").concat(P,'="0"]'))&&d.querySelector("[".concat(H,"][").concat(P,'="0"]')).setAttribute(I,"true")):p(!1)}),document.addEventListener("click",function(){p(!1)}),u.addEventListener("click",function(t){t.stopPropagation(),t.preventDefault()})}},{key:"dressAll",value:function(){var e=this,t=document.querySelectorAll("[".concat(c,"]:not([").concat(L,"])"));vl.util.each(t,function(t){e.dress(t)})}},{key:"setDisabledState",value:function(t,e){var c=t.closest(".".concat(A)).querySelector(".".concat(h));e?(t.setAttribute("disabled",e),c.setAttribute("disabled",e)):(t.removeAttribute("disabled"),c.removeAttribute("disabled"))}}]),t}()});
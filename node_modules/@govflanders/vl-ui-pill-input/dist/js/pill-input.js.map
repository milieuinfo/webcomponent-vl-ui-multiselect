{"version":3,"file":"pill-input.js","sources":["../../src/js/pill-input.js"],"sourcesContent":["/**\n * Pill Inpit\n **/\nimport Choices from 'choices.js';\n\n/**\n * Private Variables\n */\nconst piClass = `js-${vl.ns}pill-input`,\n  piPillInputClass = `${vl.ns}pill-input`,\n  piPillContainerInnerClass = `${piPillInputClass}__inner`,\n  piPillListClass = `${vl.ns}pill-input__list`,\n  piPillListMultipleClass = `${piPillListClass}--multiple`,\n  piPillClass = `${vl.ns}pill`,\n  piPillClickableClass = `${piPillClass}--clickable`,\n  piPillCloseClass = `${piPillClass}__close`,\n  piPillNoticeClass = `${vl.ns}form__annotation`,\n  piPillAtt = `data-${vl.ns}pill-input`,\n  piPillDressedAtt = `${piPillAtt}-dressed`,\n  piPillEmailAtt = `${piPillAtt}-email`,\n  piPillUniqueAtt = `${piPillAtt}-unique`,\n  piPillInputfieldClass = `${piPillClass}__input`;\n\n/**\n * Private Functions\n */\nconst _prepareChoisesConfig = element => {\n  let config = {};\n\n  // If input should be unique\n  if (element.hasAttribute(piPillUniqueAtt)) {\n    config.duplicateItems = JSON.parse(element.getAttribute(piPillUniqueAtt));\n  }\n\n  // If input should only allow e-mail\n  if (element.hasAttribute(piPillEmailAtt)) {\n    config.regexFilter = /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n  }\n\n  return config;\n};\n\nclass PillInput {\n  constructor() {\n    this.selectInstances = [];\n    this.globalConfig = {\n      removeItemButton: true,\n      duplicateItems: false,\n      shouldSortItems: false,\n      editItems: true,\n      classNames: {\n        containerOuter: piPillInputClass,\n        containerInner: piPillContainerInnerClass,\n        input: piPillInputfieldClass,\n        list: piPillListClass,\n        listItems: piPillListMultipleClass,\n        item: piPillClass,\n        itemClickable: piPillClickableClass,\n        button: piPillCloseClass,\n        notice: piPillNoticeClass\n      },\n      noResultsText: 'Geen resultaten gevonden',\n      uniqueItemText: value => {\n        return `Item \"${value}\" werd al toegevoegd`;\n      },\n      addItemText: value => {\n        return `Druk Enter om <b>\"${value}\"</b> toe te voegen`;\n      },\n      maxItemText: maxItemCount => {\n        return `Er kunnen maar ${maxItemCount} items worden toegevoegd.`;\n      },\n      callbackOnCreateTemplates: this._createTemplates\n    };\n  }\n\n  _createTemplates(template) {\n    const classNames = this.config.classNames;\n\n    return {\n      item: data => {\n        return template(`\n              <div class=\"${classNames.item}\"\n                data-item data-id=\"${data.id}\"\n                data-value=\"${data.value}\"\n                ${data.active ? 'aria-selected=\"true\"' : ''}\n                ${data.disabled ? 'aria-disabled=\"true\"' : ''}\n                data-deletable>\n                  <span>${data.label}</span>\n                  <a href=\"#\" class=\"${classNames.button}\"\n                    data-button>\n                    <span class=\"vl-u-visually-hidden\">Verwijder</span>\n                  </a>\n              </div>\n            `);\n      },\n      choice: data => {\n        return template(`\n          <div class=\"${classNames.item}\n            ${\n  data.disabled\n    ? classNames.itemDisabled\n    : classNames.itemSelectable\n}\"\n            data-select-text=\"${this.config.itemSelectText}\"\n            data-choice\n            ${\n  data.disabled\n    ? 'data-choice-disabled aria-disabled=\"true\"'\n    : 'data-choice-selectable'\n}\n            data-id=\"${data.id}\"\n            data-value=\"${data.value}\"\n            ${data.groupId > 0 ? 'role=\"treeitem\"' : 'role=\"option\"'}>\n            ${data.label}\n          </div>\n        `);\n      },\n      notice: label => {\n        return template(`\n          <div class=\"${classNames.notice}\">\n            ${label}\n          </div>\n          `);\n      }\n    };\n  }\n\n  _buildPills(select, config) {\n    let choice = new Choices(select, config);\n    this.selectInstances.push(choice);\n  }\n\n  /**\n   * dress one element\n   * @param element\n   */\n  dress(element) {\n    let config = {};\n\n    element.setAttribute(piPillDressedAtt, true);\n\n    // Build select config\n    config = _prepareChoisesConfig(element);\n    config = Object.assign(this.globalConfig, config);\n\n    this._buildPills(element, config);\n  }\n\n  /**\n   * dressAll function for the accordion functionality\n   * @return {false}\n   */\n  dressAll() {\n    // get all elements\n    const elements = document.querySelectorAll(\n      `.${piClass}:not([${piPillDressedAtt}]):not([data-${vl.ns}js-dress=\"false\"]),\n      [${piPillAtt}]:not([${piPillDressedAtt}]):not([data-${vl.ns}js-dress=\"false\"])`\n    );\n\n    // add functionality to the element\n    vl.util.each(elements, element => {\n      this.dress(element);\n    });\n  }\n}\n\nif(!('pillInput' in vl)) {\n  vl.pillInput = new PillInput();\n  vl.pillInput.dressAll();\n}\n\nexport default PillInput;\n"],"names":["piClass","vl","ns","piPillInputClass","piPillContainerInnerClass","piPillListClass","piPillListMultipleClass","piPillClass","piPillClickableClass","piPillCloseClass","piPillNoticeClass","piPillAtt","piPillDressedAtt","piPillEmailAtt","piPillUniqueAtt","piPillInputfieldClass","_prepareChoisesConfig","element","config","hasAttribute","duplicateItems","JSON","parse","getAttribute","regexFilter","PillInput","selectInstances","globalConfig","removeItemButton","shouldSortItems","editItems","classNames","containerOuter","containerInner","input","list","listItems","item","itemClickable","button","notice","noResultsText","uniqueItemText","value","addItemText","maxItemText","maxItemCount","callbackOnCreateTemplates","_createTemplates","template","data","id","active","disabled","label","choice","itemDisabled","itemSelectable","itemSelectText","groupId","select","Choices","push","setAttribute","Object","assign","_buildPills","elements","document","querySelectorAll","util","each","dress","pillInput","dressAll"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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"}
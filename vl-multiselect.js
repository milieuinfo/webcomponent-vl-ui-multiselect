import{define,VlElement}from"/node_modules/vl-ui-core/vl-core.js";import"/node_modules/vl-ui-select/vl-select.js";export class VlMultiSelect extends(VlElement(HTMLElement)){static get _observedAttributes(){return VlMultiSelect._observedDelegateAttributes}static get _observedDelegateAttributes(){return["error","success","disabled"]}get _selectedOptions(){return Array.from(this._selectElement.selectedOptions)}get _selectElement(){return this._element.querySelector("#multiselect")}constructor(){super('\n      <style>\n          @import \'/node_modules/vl-ui-multiselect/style.css\';\n      </style>\n      <div class="vl-form__input">\n        <div class="js-vl-multiselect">\n          <select \n            id="multiselect" \n            multiple \n            is="vl-select"\n            name="multiselect" \n            data-vl-multiselect>\n          </select>\n          <slot></slot>\n        </div>\n      </div>\n    '),this.values=new Set}connectedCallback(){window.safari?setTimeout(()=>this.__init(),0):this.__init(),this._selectElement.addEventListener("change",e=>{this.__updateValues(e)&&(this.value=Array.from(this.values),this.dispatchEvent(new CustomEvent("change",{detail:{values:this.value}})))})}__updateValues(e){if(null==e.detail||null==e.detail.value)return!1;let t=e.detail.value;return this.values.has(t)?(this.values.delete(t),!0):(this.values.add(t),!0)}__init(){this._shadow.querySelector("slot").assignedElements().forEach(e=>{this._selectElement.append(e)}),this.__shouldDress()&&this.dress()}__shouldDress(){return this.hasAttribute("data-vl-multiselect")}dress(e){this._selectElement.dress(e)}set choices(e){this._selectElement.choices=e}set sortFilter(e){this._selectElement.sortFilter=e}enable(){this._selectElement.enable()}disable(){this._selectElement.disable()}removeActive(){this._selectElement.removeActive()}setValueByChoice(e){this._selectElement.setValueByChoice(e)}showDropdown(){this._selectElement.showDropdown()}hideDropdown(){this._selectElement.hideDropdown()}clearSelectedOptions(){this.values.forEach(()=>{this.removeActive()}),this.hideDropdown(),this.values=new Set}attributeChangedCallback(e,t,l){let s=VlMultiSelect._observedDelegateAttributes.filter(t=>t===e);s.forEach(e=>{this.__delegateAttributeChangedCallback(l,e)}),0===s.length&&super.attributeChangedCallback(e,t,l)}__delegateAttributeChangedCallback(e,t){null!=e?this._selectElement.setAttribute(t,e):this._selectElement.removeAttribute(t)}};(()=>{const e=(e,t)=>{if(document.head.querySelector("#"+e))return console.log(`script with id '${e}' is already loaded`),Promise.resolve();let l=document.createElement("script");l.id=e,l.src=t,l.async=!1;const s=new Promise((e,t)=>{l.onload=(()=>{e()})});return document.head.appendChild(l),s};Promise.all([e("util","/node_modules/@govflanders/vl-ui-util/dist/js/util.min.js"),e("core","/node_modules/@govflanders/vl-ui-core/dist/js/core.min.js"),e("multiselect","/node_modules/vl-ui-multiselect/dist/multiselect.js")]).then(()=>{window.customElements.whenDefined("vl-select").then(()=>{define("vl-multiselect",VlMultiSelect)})})})();